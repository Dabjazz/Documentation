---
custom_edit_url: null
description: The gate is a major tool of the Luos ecosystem.
---

import { customFields } from '/docusaurus.config.js';
import Tooltip from '@site/src/components/Tooltip.js';
import Image from '@site/src/components/Images.js';

# PlatformIO

## What is PlatformIO?

PlatformIO is user-friendly and extensible integrated development environment with a set of professional development instruments, compiler and debugger. PlatformIO provide modern and powerful features to simplify the creation and delivery of embedded products
That's the reason why Luos use PlatformIOs project structure for its examples, allowing user to use and share easily service and development on a unified environment. Also Luos engine and some tools like [Gate](/docs/tools/gate) or [Inspector](/docs/tools/inspector) are available on PlatformIOs registry! This registry allow user to link directly a project and a library, like Luos engine, by including dependencies in the configuration project file call 'Platformio.ini'
learn more about <a href="https://platformio.org" target="_blank">PlatformIO and how to install PlatformIO<IconExternalLink width="10"></IconExternalLink></a>.

## PlatformIO project structure

Every PlatformIO project have a <a href="https://docs.platformio.org/en/latest/projectconf/section_platformio.html#directory-options" target="_blank">basic folder project structure<IconExternalLink width="10"></IconExternalLink></a> and must have at the root of the project a <a href="https://docs.platformio.org/en/latest/projectconf/section_platformio.html#generic-options" target="_blank">platformio.ini<IconExternalLink width="10"></IconExternalLink></a> file

Checkout luos tutorial on <a href="https://www.luos.io/tutorials/pio" target="_blank">how create a Luos project with PlatformIo <IconExternalLink width="10"></IconExternalLink></a>.


## Luos configuration for 'Platformio.ini'

Some pre-compile definition may be use to configure Luos engine when its add in your project. those definition will be taking care of for Luos engine library using Luos script call at building a project with Luos engine.
For more information, see the script source_filter_script.py in <a href="https://github.com/Luos-io/luos_engine" target="_blank" rel="external nofollow"> Luos engine <IconExternalLink width="10"></IconExternalLink> </a>.

### Definition for Luos engine Library

|      Definition       |                    Description                    |         Value         |
| :-------------------: |-------------------------------------------------: | :-------------------: |
|       LUOSHAL         | Define HAL family to use with Luos engine library |   see Luos engine HAL |
|     NOTELEMETRY       |                 Disable Telemetry                 |     On by default     |

Platformio.ini project example:
```AsciiDoc
[env:nucleo_f072rb]
platform = ststm32
board = nucleo_f072rb
framework = stm32cube

build_unflags = -Os
build_flags =
    -include node_config.h
    -O1
lib_deps =
    luos_engine
```

This project in example is Luos engine dependent. PlatformIO will download from its registry, the last version of the library Luos engine .The file "node_config.h" allowing user to configure Luos parameter and hardware definition to be add to the project.

Building project exemple:
<div align="center">
  <Image src="/img/telemetry-1.svg" darkSrc="/img/telemetry-1.svg" />
</div>

You must define the <a href="https://github.com/Luos-io/luos_engine/tree/main/engine/HAL" target="_blank" rel="external nofollow"> HAL family <IconExternalLink width="10"></IconExternalLink> </a> corresponding to your MCU. see the [compatibility page](/docs/compatibility/mcu_demoboard)

Add the definition of the HAL you want to use as follow:

Platformio.ini project example:
```AsciiDoc
[env:nucleo_f072rb]
platform = ststm32
board = nucleo_f072rb
framework = stm32cube

build_unflags = -Os
build_flags =
    -include node_config.h
    -DLUOSHAL=STM32F0
    -O1
lib_deps =
    luos_engine
```


Building project exemple:
<div align="center">
  <Image src="/img/telemetry.svg" darkSrc="/img/telemetry.svg" />
</div>

By default the telemetry is enable and send anonymous information to luos (only for Luos engine experience improving). To disable place the flag NOTELEMETRY in 'Platformio.ini' the same way as LUOSHAL Flag

###  Definition for gate tool and pipe

The same way for tools, some pre-compile definition may be use to configure Luos tools when these add in your project.
For more information, see the script select_format_script.py in <a href="https://github.com/Luos-io/luos_engine/tree/main/tool_services/gate" target="_blank" rel="external nofollow"> gate tool <IconExternalLink width="10"></IconExternalLink> </a> and select_hal_script.py in <a href="https://github.com/Luos-io/luos_engine/tree/main/tool_services/pipe" target="_blank" rel="external nofollow"> pipe <IconExternalLink width="10"></IconExternalLink> </a>

|      Definition       |                          Description                        |         Value         |
| :-------------------: |-----------------------------------------------------------: | :-------------------: |
|      GATEFORMAT       | Chose the format of data send by the gate to through a pipe |       TinyJson        |

|      Definition       |                                      Description                                   |         Value         |
| :-------------------: |----------------------------------------------------------------------------------: | :-------------------: |
|       PIPEMODE        | Choose Pipe style to send or receive information through a specific physical Layer |    SERIAL/WIFI/BLE    |
|       PIPEHAL         |             Choose Pipe HAL match a specific physical Layer with the board         |      see pipe HAL     |

For exemple see in project gate_serialcom the 'Platformio.ini' file

Plateformio.ini project example:
```AsciiDoc
[env:nucleo_f072rb]
platform = ststm32
board = nucleo_f072rb
framework = stm32cube

build_unflags = -Os
build_flags =
    -include node_config.h
    -D GATEFORMAT=TinyJSON
    -DLUOSHAL=STM32F0
    -D PIPEMODE=SERIAL
    -D PIPEHAL=NUCLEO-F0
    -O1
lib_deps =
    luos_engine
    Gate
    Pipe
```

Building project exemple:
<div align="center">
  <Image src="/img/telemetry-2.svg" darkSrc="/img/telemetry-2.svg" />
</div>

